
# Kive Media Server

Kive stands for vk live.
It is an open source media server for live streaming with support RTMP for ingress and HLS for egress


## Download and run kive
```bash
go get github.com/VKCOM/kive
cd $GOPATH/src/github.com/VKCOM/kive
docker build -t kive-docker .
mkdir /tmp/kive_docker # directoty where data files will be stored
docker run -p 8080:8080 -p 1935:1935 -v /tmp/kive_docker:/tmp/kive kive-docker kive-docker
```

## Download test file
```bash
curl -L 'https://github.com/VKCOM/kive/blob/master/test_assets/vk_sync.mp4?raw=true' --output /tmp/test.mp4
```

and stream it with ffmpeg
```bash
ffmpeg -re -i /tmp/test.mp4 -c copy -f flv  "rtmp://127.0.0.1/live/teststream"
```

## View  test stream

with simple build in player for live stream
```bash
http://127.0.0.1:8080/player/kiveabr/teststream
```

with ffplay for live streaming
```bash
ffplay http://127.0.0.1:8080/live/teststream/playlist.m3u
```

with ffplay for DVR record (last hour for example)
```bash
ffplay http://127.0.0.1:8080/live/teststream/playlist_dvr_range-$(date +%s -d '1 hour ago')-3600.m3u8
```